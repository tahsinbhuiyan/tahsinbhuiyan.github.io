<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Snake Game - Tahsin</title>

<style>
  body {
    margin: 0;
    height: 100vh;
    background: radial-gradient(circle, #020617, #000);
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: Arial, sans-serif;
    color: #22c55e;
  }

  .game {
    text-align: center;
  }

  .creator {
    font-size: 28px;
    font-weight: bold;
    margin-bottom: 10px;
    color: #38bdf8;
  }

  canvas {
    background: #000;
    border: 4px solid #22c55e;
    border-radius: 10px;
  }

  .score {
    margin: 8px 0;
    font-size: 16px;
  }

  .highscore {
    font-size: 14px;
    color: #facc15;
  }

  .controls {
    margin-top: 12px;
    display: grid;
    grid-template-columns: 60px 60px 60px;
    gap: 6px;
    justify-content: center;
  }

  button {
    padding: 12px;
    font-size: 18px;
    border: none;
    border-radius: 10px;
    background: #22c55e;
    color: black;
    font-weight: bold;
  }

  .wide {
    grid-column: span 3;
  }
</style>
</head>

<body>

<div class="game">
  <div class="creator">Creator: TAHSIN BHUIYAN</div>

  <div class="score">
    Score: <span id="score">0</span>
  </div>

  <div class="highscore">
    High Score: <span id="hs">0</span> 
    (<span id="hsname">---</span>)
  </div>

  <canvas id="game" width="300" height="300"></canvas>

  <div class="controls">
    <div></div>
    <button onclick="setDir('UP')">â¬†</button>
    <div></div>

    <button onclick="setDir('LEFT')">â¬…</button>
    <button onclick="setDir('DOWN')">â¬‡</button>
    <button onclick="setDir('RIGHT')">âž¡</button>

    <button class="wide" onclick="restart()">Restart</button>
  </div>
</div>

<script>
  const canvas = document.getElementById("game");
  const ctx = canvas.getContext("2d");

  const box = 15;
  let score = 0;

  let highScore = localStorage.getItem("snakeHS") || 0;
  let highName = localStorage.getItem("snakeHSName") || "---";

  document.getElementById("hs").innerText = highScore;
  document.getElementById("hsname").innerText = highName;

  let snake = [{ x: 10 * box, y: 10 * box }];
  let food = {
    x: Math.floor(Math.random() * 20) * box,
    y: Math.floor(Math.random() * 20) * box
  };

  let dir = "RIGHT";

  function setDir(d) {
    if (d === "LEFT" && dir !== "RIGHT") dir = d;
    if (d === "UP" && dir !== "DOWN") dir = d;
    if (d === "RIGHT" && dir !== "LEFT") dir = d;
    if (d === "DOWN" && dir !== "UP") dir = d;
  }

  document.addEventListener("keydown", e => {
    if (e.key === "ArrowLeft") setDir("LEFT");
    if (e.key === "ArrowUp") setDir("UP");
    if (e.key === "ArrowRight") setDir("RIGHT");
    if (e.key === "ArrowDown") setDir("DOWN");
  });

  function draw() {
    ctx.clearRect(0, 0, 300, 300);

    snake.forEach((s, i) => {
      ctx.fillStyle = i === 0 ? "#22c55e" : "#16a34a";
      ctx.fillRect(s.x, s.y, box, box);
    });

    ctx.fillStyle = "red";
    ctx.fillRect(food.x, food.y, box, box);

    let headX = snake[0].x;
    let headY = snake[0].y;

    if (dir === "LEFT") headX -= box;
    if (dir === "UP") headY -= box;
    if (dir === "RIGHT") headX += box;
    if (dir === "DOWN") headY += box;

    if (headX === food.x && headY === food.y) {
      score++;
      document.getElementById("score").innerText = score;
      food = {
        x: Math.floor(Math.random() * 20) * box,
        y: Math.floor(Math.random() * 20) * box
      };
    } else {
      snake.pop();
    }

    let newHead = { x: headX, y: headY };

    if (
      headX < 0 || headY < 0 ||
      headX >= 300 || headY >= 300 ||
      collision(newHead, snake)
    ) {
      endGame();
      return;
    }

    snake.unshift(newHead);
  }

  function collision(head, body) {
    return body.some(b => b.x === head.x && b.y === head.y);
  }

  function endGame() {
    clearInterval(game);

    if (score > highScore) {
      let name = prompt("ðŸŽ‰ New High Score! Enter your name:");
      if (!name) name = "Player";

      localStorage.setItem("snakeHS", score);
      localStorage.setItem("snakeHSName", name);
    }

    alert("Game Over ðŸ˜¢  Score: " + score);
    location.reload();
  }

  function restart() {
    location.reload();
  }

  let game = setInterval(draw, 120);
</script>

</body>
  </html>
